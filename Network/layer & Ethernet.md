# 네트워크 TIL - OSI 7계층과 이더넷

## OSI 7계층 모델

네트워크 통신을 7개 계층으로 나누어 표준화한 모델

### 1계층 - 물리 계층 (Physical Layer)
- **역할**: 실제 전기적 신호를 전송
- **예시**: 케이블, 허브, 리피터
- **데이터 단위**: 비트(Bit)

### 2계층 - 데이터 링크 계층 (Data Link Layer)
- **역할**: 인접한 노드 간 신뢰성 있는 데이터 전송
- **예시**: 스위치, 브리지
- **데이터 단위**: 프레임(Frame)
- **주요 기능**: MAC 주소 사용, 오류 검출 및 수정

### 3계층 - 네트워크 계층 (Network Layer)
- **역할**: 서로 다른 네트워크 간 경로 설정
- **예시**: 라우터, IP 프로토콜
- **데이터 단위**: 패킷(Packet)
- **주요 기능**: IP 주소 사용, 라우팅

### 4계층 - 전송 계층 (Transport Layer)
- **역할**: 종단간 신뢰성 있는 데이터 전송
- **예시**: TCP, UDP
- **데이터 단위**: 세그먼트(Segment)
- **주요 기능**: 포트 번호 사용, 흐름 제어

### 5계층 - 세션 계층 (Session Layer)
- **역할**: 응용 프로그램 간 세션 관리
- **예시**: NetBIOS, RPC
- **주요 기능**: 세션 설정, 유지, 종료

### 6계층 - 표현 계층 (Presentation Layer)
- **역할**: 데이터 형식 변환, 암호화/복호화
- **예시**: JPEG, MPEG, SSL/TLS
- **주요 기능**: 인코딩/디코딩, 압축, 암호화

### 7계층 - 응용 계층 (Application Layer)
- **역할**: 사용자와 네트워크 간 인터페이스 제공
- **예시**: HTTP, FTP, SMTP, DNS
- **주요 기능**: 네트워크 서비스를 사용자에게 제공

## 이더넷 (Ethernet)

### 이더넷의 정의
이더넷은 1970년대 제록스에서 개발된 유선 근거리 통신망(LAN) 기술로, 현재 가장 널리 사용되는 네트워킹 표준이다. IEEE 802.3 표준으로 정의되며, OSI 모델의 1계층(물리계층)과 2계층(데이터링크계층)에서 동작한다.

### 이더넷의 핵심 특징

#### CSMA/CD (Carrier Sense Multiple Access with Collision Detection)
- **Carrier Sense**: 전송 전에 네트워크 상태를 확인
- **Multiple Access**: 여러 장치가 동시에 네트워크에 접근 가능
- **Collision Detection**: 데이터 충돌을 감지하고 재전송 처리
- **동작 과정**: 전송 대기 → 캐리어 감지 → 전송 시작 → 충돌 감지 시 재전송

#### MAC 주소 (Media Access Control Address)
- 48비트(6바이트) 물리적 주소
- 각 네트워크 장치마다 고유한 주소
- 16진수로 표현 (예: 00:1A:2B:3C:4D:5E)
- 앞의 3바이트는 제조사 식별자(OUI), 뒤의 3바이트는 장치 고유번호

### 이더넷 프레임 구조
```
| Preamble | Destination MAC | Source MAC | Type/Length | Data | FCS |
|    8     |        6        |     6      |      2      | 46-1500 | 4 |
```
- **Preamble**: 프레임 시작을 알리는 동기화 패턴
- **Destination/Source MAC**: 목적지/출발지 MAC 주소
- **Type/Length**: 상위 프로토콜 타입 또는 데이터 길이
- **Data**: 실제 전송할 데이터 (46~1500바이트)
- **FCS**: 오류 검출을 위한 체크섬

### 허브 (Hub) - 1계층 장비
#### 특징
- **물리계층** 장비로 전기적 신호만 증폭하여 전달
- **더미 허브**라고도 불림 (지능적 처리 없음)
- 모든 포트가 **하나의 충돌 도메인** 공유
- **반이중 통신**: 송신과 수신을 동시에 할 수 없음

#### 동작 방식
- 한 포트로 들어온 데이터를 **모든 포트로 브로드캐스트**
- 연결된 모든 장치가 같은 대역폭을 공유
- 장치 수가 늘어날수록 충돌 확률 증가

#### 문제점
- **충돌 도메인**: 모든 포트가 하나의 충돌 영역
- **대역폭 공유**: 전체 대역폭을 연결된 장치들이 나누어 사용
- **보안 취약**: 모든 데이터가 모든 포트로 전송

### 스위치 (Switch) - 2계층 장비
#### 특징
- **데이터링크계층** 장비로 MAC 주소를 이용한 지능적 전송
- 각 포트마다 **독립적인 충돌 도메인** 형성
- **전이중 통신**: 송신과 수신을 동시에 수행 가능

#### 동작 방식
- **MAC 주소 테이블**을 구축하여 학습
- 목적지 MAC 주소에 해당하는 포트로만 데이터 전송
- **플러딩**: 모르는 MAC 주소는 모든 포트로 전송 후 학습

#### 장점
- **충돌 도메인 분리**: 각 포트가 독립적인 충돌 영역
- **대역폭 보장**: 각 포트가 전체 대역폭 사용 가능
- **보안 향상**: 해당 포트로만 데이터 전송
- **성능 향상**: 동시에 여러 통신 가능

#### MAC 주소 학습 과정
1. 프레임이 포트로 들어오면 출발지 MAC 주소를 기록
2. 목적지 MAC 주소가 테이블에 있으면 해당 포트로만 전송
3. 목적지 MAC 주소가 없으면 모든 포트로 플러딩
4. 응답이 오면 해당 MAC 주소와 포트를 테이블에 추가

## 정리하며
- OSI 7계층은 네트워크 통신을 체계적으로 이해하는 기본 모델
- 이더넷은 실제 LAN 환경에서 가장 많이 사용되는 기술
- 각 계층과 기술들이 어떻게 연결되어 작동하는지 이해하는 것이 중요