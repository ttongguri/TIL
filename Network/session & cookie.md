# TIL: 브라우저 쿠키와 세션의 차이점


## 🎯 핵심 개념

오늘은 브라우저에서 쿠키(Cookie)와 세션(Session)이 어떻게 작동하는지 배웠다. 두 가지 모두 사용자 상태를 유지하기 위해 사용되지만, 저장 위치와 보안 측면에서 중요한 차이가 있다.

## 🍪 쿠키(Cookie)란?

쿠키는 **클라이언트(브라우저)에 저장**되는 작은 텍스트 파일로, 사용자 정보를 저장한다.

### 주요 특징
- **저장 위치**: 클라이언트(브라우저)
- **크기**: 일반적으로 4KB 이하로 제한
- **생명주기**: 만료 시간 설정 가능 (영구 쿠키 또는 세션 쿠키)
- **전송 방식**: HTTP 요청 시 자동으로 서버에 전송됨
- **보안**: 클라이언트에서 접근 가능하여 상대적으로 취약
- **속도**: 서버 부담 없음
- **용량**: 브라우저당 약 300개, 도메인당 약 20개 제한

### 사용 예시
- 자동 로그인 정보
- 쇼핑몰 장바구니
- "오늘 하루 보지 않기" 팝업 설정
- 사용자 언어 설정
- 방문 기록 추적

### 쿠키의 동작 과정
1. 서버가 HTTP 응답 헤더에 `Set-Cookie`를 포함하여 전송
2. 브라우저가 쿠키를 저장
3. 이후 요청 시 브라우저가 자동으로 쿠키를 포함하여 전송
4. 서버가 쿠키 정보를 읽어 사용자 식별

## 🔐 세션(Session)이란?

세션은 **서버에 저장**되는 사용자 정보로, 보안이 중요한 데이터를 다룬다.

### 주요 특징
- **저장 위치**: 서버
- **크기**: 서버 용량에 따라 제한 없음 (상대적으로 큼)
- **생명주기**: 브라우저 종료 시 또는 일정 시간 후 만료
- **전송 방식**: 세션 ID만 쿠키로 전송됨
- **보안**: 서버에 저장되어 상대적으로 안전
- **속도**: 서버 리소스 사용으로 부담 증가 가능
- **용량**: 서버 메모리/디스크에 의존

### 사용 예시
- 로그인 인증 정보
- 사용자 권한 정보
- 결제 진행 중인 주문 정보
- 민감한 개인 정보
- 임시 작성 중인 게시글 내용

### 세션의 동작 과정
1. 사용자가 서버에 접속하면 서버가 고유한 세션 ID 생성
2. 서버가 세션 ID를 쿠키로 클라이언트에 전송
3. 브라우저가 세션 ID 쿠키를 저장
4. 이후 요청 시 세션 ID만 전송
5. 서버가 세션 ID로 저장된 세션 데이터 조회

## 🔄 주요 차이점 비교

| 구분 | 쿠키 (Cookie) | 세션 (Session) |
|------|--------------|---------------|
| **저장 위치** | 클라이언트 (브라우저) | 서버 |
| **저장 형식** | 텍스트 파일 | 객체 (메모리/DB) |
| **크기 제한** | 4KB | 제한 없음 (서버 용량) |
| **보안** | 낮음 (노출 위험) | 높음 (서버 보관) |
| **생명주기** | 만료 시간 지정 가능 | 브라우저 종료 시 or 타임아웃 |
| **속도** | 빠름 | 상대적으로 느림 |
| **서버 부담** | 없음 | 있음 (메모리 사용) |
| **저장 데이터** | 문자열만 가능 | 객체 저장 가능 |

## 💡 실무 활용 포인트

### 쿠키를 사용하는 경우
- 민감하지 않은 정보
- 장기간 보관이 필요한 정보
- 서버 부담을 줄이고 싶을 때
- 예: 테마 설정, 언어 설정, 광고 추적

### 세션을 사용하는 경우
- 민감한 보안 정보
- 인증/인가가 필요한 정보
- 대용량 데이터
- 예: 로그인 정보, 결제 정보, 관리자 권한

### 보안 강화 방법

**쿠키 보안**
- `HttpOnly` 플래그: JavaScript 접근 차단
- `Secure` 플래그: HTTPS에서만 전송
- `SameSite` 속성: CSRF 공격 방지
- 중요 정보는 암호화하여 저장

**세션 보안**
- 세션 ID를 예측 불가능하게 생성
- HTTPS 사용 필수
- 세션 고정 공격(Session Fixation) 방지
- 적절한 타임아웃 설정
- 로그아웃 시 세션 완전 삭제

쿠키와 세션은 함께 사용되는 경우가 많다. 일반적으로 **세션 ID는 쿠키에 저장**되고, **실제 데이터는 서버의 세션에 저장**하는 방식으로 보안과 효율성을 동시에 달성한다. 웹 개발 시 저장할 데이터의 민감도와 크기를 고려하여 적절한 방식을 선택하는 것이 중요하다.
