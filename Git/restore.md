# ğŸ“˜ Git TIL - `git restore --staged` vs `git rm --cached`

## 1. ê¸°ë³¸ ê°œë… ë¹„êµ

| ëª…ë ¹ì–´ | ì—­í•  | Git ì¶”ì  ì œê±° (Untrack) | ì›Œí‚¹ ë””ë ‰í† ë¦¬ ì˜í–¥ |
|--------|------|--------------------------|---------------------|
| `git rm --cached <file>` | Git ì¶”ì  ì œê±° + Staging ì œê±° | âœ… | âŒ |
| `git restore --staged <file>` | Staging ì œê±°ë§Œ (Unstage) | âŒ | âŒ |
| `git restore --staged --source=HEAD <file>` | ì´ì „ ì»¤ë°‹ ê¸°ì¤€ìœ¼ë¡œ Staging ë¡¤ë°± | âŒ | âŒ |

---

## 2. `git rm --cached` 

### ğŸ”¹ ëª©ì   
Gitì´ í•´ë‹¹ íŒŒì¼ì„ **ì¶”ì í•˜ì§€ ì•Šë„ë¡ ì„¤ì •**í•¨.  
ì¼ë°˜ì ìœ¼ë¡œ `.gitignore`ì— ì¶”ê°€í•˜ê¸° ì „ì— ì‚¬ìš©í•¨.

### ğŸ”¹ íŠ¹ì§•
- íŒŒì¼ì„ Gitì—ì„œ **ì™„ì „íˆ ì œê±°(Untrack)** í•˜ì§€ë§Œ ì›Œí‚¹ ë””ë ‰í† ë¦¬ì—ëŠ” **ë‚¨ê²¨ë‘ **
- ì´í›„ ì»¤ë°‹ ì‹œ í•´ë‹¹ íŒŒì¼ì€ Gitì—ì„œ ì‚¬ë¼ì§

### ğŸ”¹ ì˜ˆì‹œ
```bash
git rm --cached secrets.env
echo "secrets.env" >> .gitignore
```

---

## 3. `git restore --staged` 

### ğŸ”¹ ëª©ì   
`git add`ë¡œ stagingí•œ íŒŒì¼ì„ **ë‹¤ì‹œ unstage**í•¨.

### ğŸ”¹ íŠ¹ì§•
- **ì›Œí‚¹ ë””ë ‰í† ë¦¬ ìˆ˜ì •ì€ ê·¸ëŒ€ë¡œ** ë‘ 
- Git ì¶”ì  ìœ ì§€
- ì»¤ë°‹ ëŒ€ìƒì—ì„œë§Œ ì œê±°ë¨

### ğŸ”¹ ì˜ˆì‹œ
```bash
git add app.py
git restore --staged app.py
```

---

## 4. `git restore --staged --source=HEAD` 

### ğŸ”¹ ëª©ì   
Staging ì˜ì—­ì„ í˜„ì¬ ì»¤ë°‹ ìƒíƒœë¡œ **ë˜ëŒë¦¼(ë¡¤ë°±)**í•¨.

### ğŸ”¹ íŠ¹ì§•
- ì›Œí‚¹ ë””ë ‰í† ë¦¬ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€
- ì‹¤ìˆ˜ë¡œ ìˆ˜ì • + addê¹Œì§€ í•œ íŒŒì¼ì„ **í˜„ì¬ ì»¤ë°‹ ê¸°ì¤€ ìƒíƒœë¡œ stagingë§Œ ë³µì›**

### ğŸ”¹ ì˜ˆì‹œ
```bash
git restore --staged --source=HEAD config.yml
```

---

## 5. Git ë²„ì „ë³„ ê¶Œì¥ ëª…ë ¹ì–´ ë¹„êµ

| ì‘ì—… | Git < 2.23 (ê³¼ê±° ë°©ì‹) | Git â‰¥ 2.23 (í˜„ì¬ ê¶Œì¥ ë°©ì‹) |
|------|------------------------|------------------------------|
| Staging ì œê±° (Unstage) | `git reset <file>` | `git restore --staged <file>` |
| ì›Œí‚¹ ë””ë ‰í† ë¦¬ ë¡¤ë°± | `git checkout -- <file>` | `git restore <file>` |
| Git ì¶”ì  ì œê±° (Untrack) | `git rm --cached <file>` | `git rm --cached <file>` |

### ğŸ”¹ ì„¤ëª…
- Git 2.23ë¶€í„° `git restore`, `git switch` ëª…ë ¹ì´ ìƒˆë¡œ ë„ì…ë¨
- `checkout`, `reset`ì€ ê¸°ëŠ¥ì´ ë§ì•„ í—·ê°ˆë ¤ì„œ, **ì—­í• ì„ ë‚˜ëˆ„ê¸° ìœ„í•´ ëª…ë ¹ì–´ë¥¼ ë¶„ë¦¬**í•¨
- `restore`ëŠ” íŒŒì¼ ë¡¤ë°±/unstage ì „ìš©, `switch`ëŠ” ë¸Œëœì¹˜ ì´ë™ ì „ìš©

---

## 6. ìš”ì•½ ë° ëŠë‚€ì 

- `git restore` ì‹œë¦¬ì¦ˆëŠ” Git UX ê°œì„ ì„ ìœ„í•œ ëª…ë ¹ì–´
- **`restore --staged`ëŠ” staging ì œê±°ë§Œ** ë‹´ë‹¹ â†’ Git ì¶”ì  ìœ ì§€
- **Git ì¶”ì ì„ ì œê±°í•˜ë ¤ë©´ `rm --cached`ë¥¼ ì¨ì•¼ í•¨** â†’ ëŒ€ì²´ ë¶ˆê°€ëŠ¥

ğŸ’¡ *ì§ê´€ì„± ì¦ëŒ€/ê¸°ëŠ¥ ë¶„ë¦¬ëŠ” ì‰½ì§€ë§Œ ê°•ë ¥í•œ UX ê°œì„ ì±…* \
ğŸ’¡ *ë²„ì „ë³„ ì»¤ë§¨ë“œ ë³€í™” ê³¼ì •ì„ íŠ¸ë˜í‚¹í•˜ë©´ì„œ ê°œë°œìì˜ ì˜ë„ë¥¼ íŒŒì•…í•˜ëŠ” ê²ƒë„ ì¬ë¯¸ìˆì„ ë“¯*